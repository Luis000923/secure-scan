# Maintainer: Sobdev <tu-email@ejemplo.com>
pkgname=secure-scan
pkgver=1.2.4
pkgrel=1
pkgdesc="Herramienta SAST para detectar vulnerabilidades y cÃ³digo malicioso"
arch=('any')
url="https://github.com/Sobdev/secure-scan"
license=('MIT')
depends=('nodejs>=18')
makedepends=('npm')
source=("https://registry.npmjs.org/${pkgname}/-/${pkgname}-${pkgver}.tgz")
sha256sums=('SKIP')

package() {
    cd "${srcdir}"
    
    # Crear directorios
    install -dm755 "${pkgdir}/usr/lib/${pkgname}"
    install -dm755 "${pkgdir}/usr/bin"
    
    # Instalar el paquete globalmente en el directorio del paquete
    npm install -g "${pkgname}@${pkgver}" --prefix "${pkgdir}/usr"
    
    # Corregir permisos
    find "${pkgdir}/usr" -type d -exec chmod 755 {} \;
    find "${pkgdir}/usr" -type f -exec chmod 644 {} \;
    chmod 755 "${pkgdir}/usr/bin/secure-scan"
}
